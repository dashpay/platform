syntax = "proto3";
import "google/protobuf/wrappers.proto";
import "google/protobuf/struct.proto";

package org.dash.platform.dapi.v0;

import "google/protobuf/timestamp.proto";

service Platform {
  rpc broadcastStateTransition(BroadcastStateTransitionRequest)
      returns (BroadcastStateTransitionResponse);
  rpc getIdentity(GetIdentityRequest) returns (GetIdentityResponse);
  rpc getIdentityKeys(GetIdentityKeysRequest) returns (GetIdentityKeysResponse);
  rpc getIdentitiesContractKeys(GetIdentitiesContractKeysRequest) returns (GetIdentitiesContractKeysResponse);
  rpc getIdentityNonce(GetIdentityNonceRequest) returns (GetIdentityNonceResponse);
  rpc getIdentityContractNonce(GetIdentityContractNonceRequest) returns (GetIdentityContractNonceResponse);
  rpc getIdentityBalance(GetIdentityBalanceRequest)
      returns (GetIdentityBalanceResponse);
  rpc getIdentityBalanceAndRevision(GetIdentityBalanceAndRevisionRequest)
      returns (GetIdentityBalanceAndRevisionResponse);
  rpc getProofs(GetProofsRequest) returns (GetProofsResponse);
  rpc getDataContract(GetDataContractRequest) returns (GetDataContractResponse);
  rpc getDataContractHistory(GetDataContractHistoryRequest)
      returns (GetDataContractHistoryResponse);
  rpc getDataContracts(GetDataContractsRequest)
      returns (GetDataContractsResponse);
  rpc getDocuments(GetDocumentsRequest) returns (GetDocumentsResponse);
  rpc getIdentityByPublicKeyHash(GetIdentityByPublicKeyHashRequest)
      returns (GetIdentityByPublicKeyHashResponse);
  rpc waitForStateTransitionResult(WaitForStateTransitionResultRequest)
      returns (WaitForStateTransitionResultResponse);
  rpc getConsensusParams(GetConsensusParamsRequest)
      returns (GetConsensusParamsResponse);
  rpc getProtocolVersionUpgradeState(GetProtocolVersionUpgradeStateRequest) returns (GetProtocolVersionUpgradeStateResponse);
  rpc getProtocolVersionUpgradeVoteStatus(GetProtocolVersionUpgradeVoteStatusRequest) returns (GetProtocolVersionUpgradeVoteStatusResponse);
  rpc getEpochsInfo(GetEpochsInfoRequest) returns (GetEpochsInfoResponse);
  // What votes are currently happening for a specific contested index
  rpc getContestedResources(GetContestedResourcesRequest) returns (GetContestedResourcesResponse);
  // What's the state of a contested resource vote? (ie who is winning?)
  rpc getContestedResourceVoteState(GetContestedResourceVoteStateRequest) returns (GetContestedResourceVoteStateResponse);
  // Who voted for a contested resource to go to a specific identity?
  rpc getContestedResourceVotersForIdentity(GetContestedResourceVotersForIdentityRequest) returns (GetContestedResourceVotersForIdentityResponse);
  // How did an identity vote?
  rpc getContestedResourceIdentityVoteStatus(GetContestedResourceIdentityVoteStatusRequest) returns (GetContestedResourceIdentityVoteStatusResponse);
  // What vote polls will end soon?
  rpc getVotePollsByEndDate(GetVotePollsByEndDateRequest) returns (GetVotePollsByEndDateResponse);
  rpc getPrefundedSpecializedBalance(GetPrefundedSpecializedBalanceRequest) returns (GetPrefundedSpecializedBalanceResponse);
  rpc getPathElements(GetPathElementsRequest) returns (GetPathElementsResponse);
}

message Proof {
  bytes grovedb_proof = 1;
  bytes quorum_hash = 2;
  bytes signature = 3;
  uint32 round = 4;
  bytes block_id_hash = 5;
  uint32 quorum_type = 6;
}

message ResponseMetadata {
  uint64 height = 1;
  uint32 core_chain_locked_height = 2;
  uint32 epoch = 3;
  uint64 time_ms = 4;
  uint32 protocol_version = 5;
  string chain_id = 6;
}

message StateTransitionBroadcastError {
  uint32 code = 1;
  string message = 2;
  bytes data = 3;
}

enum KeyPurpose {
  AUTHENTICATION = 0;
  ENCRYPTION = 1;
  DECRYPTION = 2;
  TRANSFER = 3;
  VOTING = 5;
}

message BroadcastStateTransitionRequest { bytes state_transition = 1; }

message BroadcastStateTransitionResponse {}

message GetIdentityRequest {

  message GetIdentityRequestV0 {
    bytes id = 1;
    bool prove = 2;
  }

  oneof version { GetIdentityRequestV0 v0 = 1; }
}

message GetIdentityNonceRequest {

  message GetIdentityNonceRequestV0 {
    bytes identity_id = 1;
    bool prove = 2;
  }

  oneof version { GetIdentityNonceRequestV0 v0 = 1; }
}


message GetIdentityContractNonceRequest {

  message GetIdentityContractNonceRequestV0 {
    bytes identity_id = 1;
    bytes contract_id = 2;
    bool prove = 3;
  }

  oneof version { GetIdentityContractNonceRequestV0 v0 = 1; }
}

message GetIdentityBalanceRequest {

  message GetIdentityBalanceRequestV0 {
    bytes id = 1;
    bool prove = 2;
  }

  oneof version { GetIdentityBalanceRequestV0 v0 = 1; }
}

message GetIdentityBalanceAndRevisionRequest {

  message GetIdentityBalanceAndRevisionRequestV0 {
    bytes id = 1;
    bool prove = 2;
  }

  oneof version { GetIdentityBalanceAndRevisionRequestV0 v0 = 1; }
}

message GetIdentityResponse {

  message GetIdentityResponseV0 {
    oneof result {
      bytes identity = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version { GetIdentityResponseV0 v0 = 1; }
}

message GetIdentityNonceResponse {

  message GetIdentityNonceResponseV0 {
    oneof result {
      uint64 identity_nonce = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version { GetIdentityNonceResponseV0 v0 = 1; }
}

message GetIdentityContractNonceResponse {

  message GetIdentityContractNonceResponseV0 {
    oneof result {
      uint64 identity_contract_nonce = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version { GetIdentityContractNonceResponseV0 v0 = 1; }
}

message GetIdentityBalanceResponse {

  message GetIdentityBalanceResponseV0 {
    oneof result {
      uint64 balance = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version { GetIdentityBalanceResponseV0 v0 = 1; }
}

message GetIdentityBalanceAndRevisionResponse {

  message GetIdentityBalanceAndRevisionResponseV0 {
    message BalanceAndRevision {
      uint64 balance = 1;
      uint64 revision = 2;
    }

    oneof result {
      BalanceAndRevision balance_and_revision = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version { GetIdentityBalanceAndRevisionResponseV0 v0 = 1; }
}

message KeyRequestType {
  oneof request {
    AllKeys all_keys = 1;
    SpecificKeys specific_keys = 2;
    SearchKey search_key = 3;
  }
}

message AllKeys {}

message SpecificKeys { repeated uint32 key_ids = 1; }

message SearchKey { map<uint32, SecurityLevelMap> purpose_map = 1; }

message SecurityLevelMap {
  enum KeyKindRequestType {
    CURRENT_KEY_OF_KIND_REQUEST = 0;
    ALL_KEYS_OF_KIND_REQUEST = 1;
  }
  map<uint32, KeyKindRequestType> security_level_map = 1;
}

message GetIdentityKeysRequest {

  message GetIdentityKeysRequestV0 {
    bytes identity_id = 1;
    KeyRequestType request_type = 2;
    google.protobuf.UInt32Value limit = 3;
    google.protobuf.UInt32Value offset = 4;
    bool prove = 5;
  }

  oneof version { GetIdentityKeysRequestV0 v0 = 1; }
}

message GetIdentityKeysResponse {

  message GetIdentityKeysResponseV0 {
    message Keys { repeated bytes keys_bytes = 1; }

    oneof result {
      Keys keys = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version { GetIdentityKeysResponseV0 v0 = 1; }
}

message GetIdentitiesContractKeysRequest {
  message GetIdentitiesContractKeysRequestV0 {
    repeated bytes identities_ids = 1;
    bytes contract_id = 2;
    optional string document_type_name = 3;
    repeated KeyPurpose purposes = 4;
    bool prove = 5;
  }

  oneof version {
    GetIdentitiesContractKeysRequestV0 v0 = 1;
  }
}

message GetIdentitiesContractKeysResponse {
  message GetIdentitiesContractKeysResponseV0 {
    message PurposeKeys {
      KeyPurpose purpose = 1;
      repeated bytes keys_bytes = 2;
    }

    message IdentityKeys {
      bytes identity_id = 1;
      repeated PurposeKeys keys = 2;
    }

    message IdentitiesKeys {
      repeated IdentityKeys entries = 1;
    };

    oneof result {
      IdentitiesKeys identities_keys = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version { GetIdentitiesContractKeysResponseV0 v0 = 1; }
}

message GetProofsRequest {
  message GetProofsRequestV0 {
    message DocumentRequest {
      enum DocumentContestedStatus {
        NOT_CONTESTED = 0;
        MAYBE_CONTESTED = 1;
        CONTESTED = 2;
      }
      bytes contract_id = 1;
      string document_type = 2;
      bool document_type_keeps_history = 3;
      bytes document_id = 4;
      DocumentContestedStatus document_contested_status = 5;
    }

    message IdentityRequest {
      enum Type {
        FULL_IDENTITY = 0;
        BALANCE = 1;
        KEYS = 2;
        REVISION = 3;
      }
      bytes identity_id = 1;
      Type request_type = 2;
    }

    message ContractRequest { bytes contract_id = 1; }

    message VoteStatusRequest {
      message ContestedResourceVoteStatusRequest {
        bytes contract_id = 1;
        string document_type_name = 2;
        string index_name = 3;
        repeated bytes index_values = 4;
        bytes voter_identifier = 5;
      }

      oneof request_type { ContestedResourceVoteStatusRequest contested_resource_vote_status_request = 1; }
    }

    repeated IdentityRequest identities = 1;
    repeated ContractRequest contracts = 2;
    repeated DocumentRequest documents = 3;
    repeated VoteStatusRequest votes = 4;
  }

  oneof version { GetProofsRequestV0 v0 = 1; }
}

message GetProofsResponse {
  message GetProofsResponseV0 {
    oneof result { Proof proof = 1; }

    ResponseMetadata metadata = 2;
  }
  oneof version { GetProofsResponseV0 v0 = 1; }
}

message GetDataContractRequest {
  message GetDataContractRequestV0 {
    bytes id = 1;
    bool prove = 2;
  }
  oneof version { GetDataContractRequestV0 v0 = 1; }
}

message GetDataContractResponse {
  message GetDataContractResponseV0 {
    oneof result {
      bytes data_contract = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }
  oneof version { GetDataContractResponseV0 v0 = 1; }
}

message GetDataContractsRequest {
  message GetDataContractsRequestV0 {
    repeated bytes ids = 1;
    bool prove = 2;
  }
  oneof version { GetDataContractsRequestV0 v0 = 1; }
}

message GetDataContractsResponse {
  message DataContractEntry {
    bytes identifier = 1;
    google.protobuf.BytesValue data_contract = 2;
  }
  message DataContracts {
    repeated DataContractEntry data_contract_entries = 1;
  }

  message GetDataContractsResponseV0 {
    oneof result {
      DataContracts data_contracts = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }
  oneof version { GetDataContractsResponseV0 v0 = 1; }
}

message GetDataContractHistoryRequest {
  message GetDataContractHistoryRequestV0 {
    bytes id = 1;
    google.protobuf.UInt32Value limit = 2;
    google.protobuf.UInt32Value offset = 3;
    uint64 start_at_ms = 4;
    bool prove = 5;
  }
  oneof version { GetDataContractHistoryRequestV0 v0 = 1; }
}

message GetDataContractHistoryResponse {
  message GetDataContractHistoryResponseV0 {
    message DataContractHistoryEntry {
      uint64 date = 1;
      bytes value = 2;
    }

    message DataContractHistory {
      repeated DataContractHistoryEntry data_contract_entries = 1;
    }

    oneof result {
      DataContractHistory data_contract_history = 1;
      Proof proof = 2;
    }

    ResponseMetadata metadata = 3;
  }
  oneof version { GetDataContractHistoryResponseV0 v0 = 1; }
}

message GetDocumentsRequest {
  message GetDocumentsRequestV0 {
    bytes data_contract_id = 1;
    string document_type = 2;
    bytes where = 3;
    bytes order_by = 4;
    uint32 limit = 5;
    oneof start {
      bytes start_after = 6;
      bytes start_at = 7;
    }
    bool prove = 8;
  }
  oneof version { GetDocumentsRequestV0 v0 = 1; }
}

message GetDocumentsResponse {
  message GetDocumentsResponseV0 {
    message Documents { repeated bytes documents = 1; }

    oneof result {
      Documents documents = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }
  oneof version { GetDocumentsResponseV0 v0 = 1; }
}

message GetIdentityByPublicKeyHashRequest {
  message GetIdentityByPublicKeyHashRequestV0 {
    bytes public_key_hash = 1;
    bool prove = 2;
  }
  oneof version { GetIdentityByPublicKeyHashRequestV0 v0 = 1; }
}

message GetIdentityByPublicKeyHashResponse {
  message GetIdentityByPublicKeyHashResponseV0 {
    oneof result {
      bytes identity = 1;
      Proof proof = 2;
    }

    ResponseMetadata metadata = 3;
  }
  oneof version { GetIdentityByPublicKeyHashResponseV0 v0 = 1; }
}

message WaitForStateTransitionResultRequest {
  message WaitForStateTransitionResultRequestV0 {
    bytes state_transition_hash = 1;
    bool prove = 2;
  }
  oneof version { WaitForStateTransitionResultRequestV0 v0 = 1; }
}

message WaitForStateTransitionResultResponse {
  message WaitForStateTransitionResultResponseV0 {
    oneof result {
      StateTransitionBroadcastError error = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }
  oneof version { WaitForStateTransitionResultResponseV0 v0 = 1; }
}

message GetConsensusParamsRequest {
  message GetConsensusParamsRequestV0 {
    int32 height = 1;
    bool prove = 2;
  }
  oneof version { GetConsensusParamsRequestV0 v0 = 1; }
}

message GetConsensusParamsResponse {
  message ConsensusParamsBlock {
    string max_bytes = 1;
    string max_gas = 2;
    string time_iota_ms = 3;
  }

  message ConsensusParamsEvidence {
    string max_age_num_blocks = 1;
    string max_age_duration = 2;
    string max_bytes = 3;
  }

  message GetConsensusParamsResponseV0 {
    ConsensusParamsBlock block = 1;
    ConsensusParamsEvidence evidence = 2;
  }
  oneof version { GetConsensusParamsResponseV0 v0 = 1; }
}


message GetProtocolVersionUpgradeStateRequest {
  message GetProtocolVersionUpgradeStateRequestV0 {
    bool prove = 1;
  }

  oneof version {
    GetProtocolVersionUpgradeStateRequestV0 v0 = 1;
  }
}

message GetProtocolVersionUpgradeStateResponse {
  message GetProtocolVersionUpgradeStateResponseV0 {
    message Versions {
      repeated VersionEntry versions = 1;
    }

    message VersionEntry {
      uint32 version_number = 1;
      uint32 vote_count = 2;
    }

    oneof result {
      Versions versions = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version {
    GetProtocolVersionUpgradeStateResponseV0 v0 = 1;
  }
}

message GetProtocolVersionUpgradeVoteStatusRequest {
  message GetProtocolVersionUpgradeVoteStatusRequestV0 {
    bytes start_pro_tx_hash = 1;
    uint32 count = 2;
    bool prove = 3;
  }

  oneof version {
    GetProtocolVersionUpgradeVoteStatusRequestV0 v0 = 1;
  }
}

message GetProtocolVersionUpgradeVoteStatusResponse {
  message GetProtocolVersionUpgradeVoteStatusResponseV0 {
    message VersionSignals {
      repeated VersionSignal version_signals = 1;
    }

    message VersionSignal {
      bytes pro_tx_hash = 1;
      uint32 version = 2;
    }

    oneof result {
      VersionSignals versions = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version {
    GetProtocolVersionUpgradeVoteStatusResponseV0 v0 = 1;
  }
}

message GetEpochsInfoRequest {
  message GetEpochsInfoRequestV0 {
    google.protobuf.UInt32Value start_epoch = 1;
    uint32 count = 2;
    bool ascending = 3;
    bool prove = 4;
  }

  oneof version {
    GetEpochsInfoRequestV0 v0 = 1;
  }
}

message GetEpochsInfoResponse {
  message GetEpochsInfoResponseV0 {
    message EpochInfos {
      repeated EpochInfo epoch_infos = 1;
    }

    message EpochInfo {
      uint32 number = 1;
      uint64 first_block_height = 2;
      uint32 first_core_block_height = 3;
      uint64 start_time = 4;
      double fee_multiplier = 5;
      uint32 protocol_version = 6;
    }

    oneof result {
      EpochInfos epochs = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version {
    GetEpochsInfoResponseV0 v0 = 1;
  }
}

message GetContestedResourcesRequest {
  message GetContestedResourcesRequestV0 {
    message StartAtValueInfo {
      bytes start_value = 1;
      bool start_value_included = 2;
    }

    bytes contract_id = 1;
    string document_type_name = 2;
    string index_name = 3;
    repeated bytes start_index_values = 4;
    repeated bytes end_index_values = 5;
    optional StartAtValueInfo start_at_value_info = 6;
    optional uint32 count = 7;
    bool order_ascending = 8;
    bool prove = 9;
  }

  oneof version {
    GetContestedResourcesRequestV0 v0 = 1;
  }
}

message GetContestedResourcesResponse {
  message GetContestedResourcesResponseV0 {
    message ContestedResourceValues {
      repeated bytes contested_resource_values = 1;
    }

    oneof result {
      ContestedResourceValues contested_resource_values = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version {
    GetContestedResourcesResponseV0 v0 = 1;
  }
}

message GetVotePollsByEndDateRequest {
  message GetVotePollsByEndDateRequestV0 {
    message StartAtTimeInfo {
      uint64 start_time_ms = 1;
      bool start_time_included = 2;
    }
    message EndAtTimeInfo {
      uint64 end_time_ms = 1;
      bool end_time_included = 2;
    }
    optional StartAtTimeInfo start_time_info = 1;
    optional EndAtTimeInfo end_time_info = 2;
    optional uint32 limit = 3;
    optional uint32 offset = 4;
    bool ascending = 5;
    bool prove = 6;
  }

  oneof version {
    GetVotePollsByEndDateRequestV0 v0 = 1;
  }
}

message GetVotePollsByEndDateResponse {
  message GetVotePollsByEndDateResponseV0 {
    message SerializedVotePollsByTimestamp {
      uint64 timestamp = 1;
      repeated bytes serialized_vote_polls = 2;
    }

    message SerializedVotePollsByTimestamps {
      repeated SerializedVotePollsByTimestamp vote_polls_by_timestamps = 1;
      bool finished_results = 2;
    }

    oneof result {
      SerializedVotePollsByTimestamps vote_polls_by_timestamps = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version {
    GetVotePollsByEndDateResponseV0 v0 = 1;
  }
}

// What's the state of a contested resource vote? (ie who is winning?)
message GetContestedResourceVoteStateRequest {
  message GetContestedResourceVoteStateRequestV0 {
    message StartAtIdentifierInfo {
      bytes start_identifier = 1;
      bool start_identifier_included = 2;
    }
    enum ResultType {
      IDENTITY_IDS_ONLY = 0;
      DOCUMENTS = 1;
      VOTE_TALLY = 2;
      DOCUMENTS_AND_VOTE_TALLY = 3;
    }

    bytes contract_id = 1;
    string document_type_name = 2;
    string index_name = 3;
    repeated bytes index_values = 4;
    ResultType result_type = 5;
    optional StartAtIdentifierInfo start_at_identifier_info = 6;
    optional uint32 count = 7;
    bool order_ascending = 8;
    bool prove = 9;
  }

  oneof version {
    GetContestedResourceVoteStateRequestV0 v0 = 1;
  }
}

message GetContestedResourceVoteStateResponse {
  message GetContestedResourceVoteStateResponseV0 {
    message ContestedResourceContenders {
      repeated Contender contenders = 1;
    }

    message Contender {
      bytes identifier = 1;
      optional uint32 vote_count = 2;
      optional bytes document = 3;
    }

    oneof result {
      ContestedResourceContenders contested_resource_contenders = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version {
    GetContestedResourceVoteStateResponseV0 v0 = 1;
  }
}

// Who voted for a contested resource to go to a specific identity?
message GetContestedResourceVotersForIdentityRequest {
  message GetContestedResourceVotersForIdentityRequestV0 {
    message StartAtIdentifierInfo {
      bytes start_identifier = 1;
      bool start_identifier_included = 2;
    }
    bytes contract_id = 1;
    string document_type_name = 2;
    string index_name = 3;
    repeated bytes index_values = 4;
    bytes contestant_id = 5;
    optional StartAtIdentifierInfo start_at_identifier_info = 6;
    optional uint32 count = 7;
    bool order_ascending = 8;
    bool prove = 9;
  }

  oneof version {
    GetContestedResourceVotersForIdentityRequestV0 v0 = 1;
  }
}

message GetContestedResourceVotersForIdentityResponse {
  message GetContestedResourceVotersForIdentityResponseV0 {
    message ContestedResourceVoters {
      repeated bytes voters = 1;
      bool finished_results = 2;
    }

    oneof result {
      ContestedResourceVoters contested_resource_voters = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version {
    GetContestedResourceVotersForIdentityResponseV0 v0 = 1;
  }
}

// How did an identity vote?
message GetContestedResourceIdentityVoteStatusRequest {
  message GetContestedResourceIdentityVoteStatusRequestV0 {
    bool prove = 1;
    repeated bytes resource_path = 2;
    bytes resource_identifier = 3;
    optional bytes voter_identifier = 4;
    optional uint32 count = 5;
    optional bool ascending = 6;
  }

  oneof version {
    GetContestedResourceIdentityVoteStatusRequestV0 v0 = 1;
  }
}

message GetContestedResourceIdentityVoteStatusResponse {
  message GetContestedResourceIdentityVoteStatusResponseV0 {
    message ContestedResourceVoters {
      repeated Voter voters = 1;
      bool finished_results = 2;
    }

    message Voter {
      bytes identifier = 1;
    }

    oneof result {
      ContestedResourceVoters contested_resource_voters = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version {
    GetContestedResourceIdentityVoteStatusResponseV0 v0 = 1;
  }
}

message GetPrefundedSpecializedBalanceRequest {

  message GetPrefundedSpecializedBalanceRequestV0 {
    bytes id = 1;
    bool prove = 2;
  }

  oneof version { GetPrefundedSpecializedBalanceRequestV0 v0 = 1; }
}

message GetPrefundedSpecializedBalanceResponse {

  message GetPrefundedSpecializedBalanceResponseV0 {
    oneof result {
      uint64 balance = 1;
      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version { GetPrefundedSpecializedBalanceResponseV0 v0 = 1; }
}


message GetPathElementsRequest {
  message GetPathElementsRequestV0 {
    repeated bytes path = 1;
    repeated bytes keys = 2;
    bool prove = 3;
  }

  oneof version {
    GetPathElementsRequestV0 v0 = 1;
  }
}

message GetPathElementsResponse {
  message GetPathElementsResponseV0 {
    message Elements {
      repeated bytes elements = 1;
    }

    oneof result {
      Elements elements = 1;

      Proof proof = 2;
    }
    ResponseMetadata metadata = 3;
  }

  oneof version {
    GetPathElementsResponseV0 v0 = 1;
  }
}
