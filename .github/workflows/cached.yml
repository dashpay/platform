---
name: Rebuild cached dependencies

on:
  workflow_dispatch:
jobs:
  build-rust-deps:
    name: Prebuild and cache some Rust dependencies
    runs-on: ubuntu-24.04
    env:
      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
      AWS_REGION: ${{ secrets.AWS_REGION }}

    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 1
      - name: Precompile librocksdb
        uses: ./.github/actions/librocksdb
        with:
          force: true
